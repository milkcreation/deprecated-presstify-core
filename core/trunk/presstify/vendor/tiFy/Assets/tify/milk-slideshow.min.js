!function(e,t,r,i){"use strict";function n(t,r){this.$el=e(t),this.$viewer=e(".viewer",this.$el),this.$roller=e(".roller",this.$el),this.dir="next",this.$el.data(s,this);this.$el.data(s+"-opts");this.defaults={autoscroll:!0,delay:3e3,easing:"easeInOutExpo",transition:"slideLeft",behavior:"cycle",speed:500,bypage:1,bystep:1,responsive:!0,stop_hover:!0,before:function(){return!1},after:function(){return!1},beforeInit:function(){return!1},afterInit:function(){return!1},resize:function(){return!1}};var n={};e.each(this.defaults,function(r,s){var a=e(t).data(r);n[r]=a!=i?a:s}),this.defaults=n,this.o=e.extend(!0,this.defaults,r),this.init()}var s="milk-slideshow",a={init:function(e){return this.each(function(){new n(this,e)})}};e.fn.milkSlideshow=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("La methode "+t+" n'existe pas pour jQuery.milkSlideshow"):a.init.apply(this,arguments)},n.prototype={init:function(){var t=this;return e("> li",t.$roller).each(function(t){e(this).attr("data-index",t)}),t._style(),t.$current=e("> li:eq(0)",t.$roller),t.currentIndex=0,t._setCurrent(),t.$viewer.scrollLeft(0),t.gap=1,t.o.beforeInit(),e("> li",t.$roller).length<=t.o.bypage?void e(".nav",t.$el).hide():(t._listen(),t.o.autoscroll&&t._auto(),void t.o.afterInit())},_style:function(){var t=this;switch(t.o.transition){case"slideLeft":t.$el.css("position","relative"),t.$roller.css({width:"99999em",margin:0,padding:0,"list-style-type":"none"}),e("> li",t.$roller).each(function(){e(this).css({"float":"left"}),e(this).css({width:t.$el.width()/t.o.bypage+"px"})})}},_auto:function(){var t=this;t.timeout=setInterval(function(){t.autoscroll=!0,t.dir=e(this).hasClass("prev")?"prev":"next",t.$current=e("> li.current",t.$roller),t.$target="prev"===t.dir?t.$current.is(":first-child")?e("> li:last",t.$roller):t.$current.prev():t.$current.is(":last-child")?e("> li:first",t.$roller):t.$current.next(),t.targetIndex=t.$target.data("index"),t._slide()},t.o.delay)},_listen:function(){var e=this;e.o.autoscroll&&(e.o.stop_hover?e.$el.hover(function(){e.autoscroll=!1,clearTimeout(e.timeout)},function(){e._auto()}):e._auto()),e._nav(),jQuery().swipe&&e._swipe(),e.o.responsive&&e._resize()},_preloadImg:function(){var t=this,r=t.$target.data("src");r&&e("<img />").load(r,function(){e(".item-image",$target).attr("style","background-image:url("+r+");"),t._transition($target,dir)})},_nav:function(){var t=this;e(".nav",t.$el).click(function(r){return r.preventDefault(),t.$viewer.is(":animated")?!1:(t.dir=e(this).hasClass("prev")?"prev":"next",void t._slide())}),e(".tabs > li > a",t.$el).click(function(r){if(r.preventDefault(),t.$viewer.is(":animated"))return!1;var i=e(this).closest("li").index();t.dir=e(".tabs > li.current").index()>i?"prev":"next",t.$target=e("> li[data-index='"+e(this).closest("li").index()+"']",t.$roller),t._slide()}),e("a[data-milkslideshow-slide]").click(function(r){return r.preventDefault(),t.$viewer.is(":animated")?!1:(t.$target=e("> li[data-index='"+parseInt(e(this).data("milkslideshow-slide")-1)+"']",t.$roller),void t._slide())})},_slide:function(){var t=this;t.$current=e("> li.current",t.$roller),t.$target||(t.$target="prev"===t.dir?t.$current.is(":first-child")?e("> li:last",t.$roller):t.$current.prev():t.$current.is(":last-child")?e("> li:first",t.$roller):t.$current.next());var r=t.$roller.position().left,i=t.$target.position().left;switch(t.targetIndex=t.$target.data("index"),t.gap=t.targetIndex-t.currentIndex,t.o.transition){case"slideLeft":if("prev"===t.dir){e("> li",t.$roller).slice(0,t.gap).each(function(){e(this).appendTo(t.$roller)});var n=t.gap<0?-t.gap:1;t.o.before(t.dir,t.$target,t),t.$viewer.scrollLeft(t.$target.outerWidth()*n),t.$viewer.stop().animate({scrollLeft:0},t.o.speed,t.o.easing,function(){t.o.after(t.dir,t.$target,t),t.$current=t.$target,t._setCurrent(),t._reset()})}else t.o.before(t.dir,t.$target,t),t.$viewer.stop().animate({scrollLeft:i-r},t.o.speed,t.o.easing,function(){t.o.after(t.dir,t.$target,t),t.$current=t.$target,t._setCurrent(),e("> li",t.$roller).slice(0,t.gap).each(function(){e(this).appendTo(t.$roller)}),t._reset()});break;case"fadeIn":if("prev"===t.dir){for(var s=0;s<-gap;s++)e("> li:last",t.$roller).prependTo(t.$roller);t.o.before(t.dir,t.$target,t),t.$target.hide(),t.$current.fadeOut(function(){t.o.after(t.dir,t.$target,t),t.$current=t.$target,t._setCurrent(),t._reset()})}else t.o.before(t.dir,t.$target,t),t.$target.hide(),t.$current.fadeOut(function(){t.$target.fadeIn(),t.o.after(t.dir,t.$target,t),t.$current=t.$target,t._setCurrent(),e("> li",t.$roller).slice(0,gap).each(function(){e(this).appendTo(t.$roller)}),t._reset()})}},_swipe:function(){var e=this;e.$viewer.swipe({triggerOnTouchEnd:!0,swipeStatus:e._onSwipe,allowPageScroll:"horizontal",threshold:75})},_onSwipe:function(e,t,r){},_setCurrent:function(){var t=this;t.$current.addClass("current").siblings().removeClass("current"),t.currentIndex=t.$current.data("index"),e(".tabs > li:eq("+t.currentIndex+")",t.$el).addClass("current").siblings().removeClass("current"),e('li[data-milkslideshow="tabindex"]:eq('+t.currentIndex+")").addClass("current").siblings().removeClass("current")},_reset:function(){var e=this;e.$target=i,e.$viewer.scrollLeft(0)},_resize:function(){var t=this;e(window).resize(function(){t.o.resize(t.$current,t),e("> li",t.$roller).css("width",t.$viewer.width()/t.o.bypage+"px");var r=t.$roller.position().left,i=t.$current.position().left;t.$viewer.scrollLeft(i-r)}).trigger("resize")}}}(jQuery,document,window,void 0);